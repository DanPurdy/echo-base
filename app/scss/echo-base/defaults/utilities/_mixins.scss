//==============================================================================
//
//  echo-base/defaults/utilities/_mixins.scss
//
//  ----------------------------------------------------------------------------
//  Table of contents
//  ----------------------------------------------------------------------------
//  a. Breakpoints
//
//
//  @copyright 2015, Loft Digital, www.weareloft.com
//
//==============================================================================




//==============================================================================
//  Breakpoint
//==============================================================================

@mixin breakpoint($key) {

    @if ($mobile-first == true) {
        $flow: min-width;
    } @else {
        $flow: max-width;
    }

    @media (#{$flow}: breakpoint($key)) {
        @content;
    }
}



@mixin text-size($element, $breakpoint-name: 'default') {
    $element-properties: text-properties-for($element, $breakpoint-name);

    @if $element-properties != false {

        // runs through each key, value map to include all values you may have specified for a certain size.
        @each $key, $value in $element-properties {
            #{$key}: #{$value};
        }

    } @else {

        // the breakpoint has no defined properties which to parse
        @warn "Breakpoint '#{$breakpoint-name}' for <'#{$element}'> is not defined";
    }
}

@mixin responsive-text-size($element, $default-size: 'default') {

    @include text-size($element, $default-size);

    $element-breakpoints-map: text-breakpoints-for($element);
    $element-breakpoints-keys: order-breakpoints();

    @each $breakpoint-name in $element-breakpoints-keys {

        @if $breakpoint-name != $default-size {

            @if breakpoint($breakpoint-name) != false {

                @include breakpoint($breakpoint-name) {

                    @if $mobile-first == true {

                        @if index($element-breakpoints-keys, $breakpoint-name) == length($element-breakpoints-keys) {

                            @include text-size($element, $breakpoint-name);

                        } @else {
                            $pos: index($element-breakpoints-keys, $breakpoint-name) + 1;
                            @include text-size($element, nth($element-breakpoints-keys, $pos));
                        }

                    } @else {

                        @include text-size($element, $breakpoint-name);
                    }

                }
            } @else {

                @warn "Text size '#{$breakpoint-name}' for <'#{$element}'> was skipped as breakpoint: '#{$breakpoint-name}' doesn't exist "
            }
        }
    }
}
